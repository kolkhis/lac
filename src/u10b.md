<div class="flex-container">
        <img src="https://github.com/ProfessionalLinuxUsersGroup/img/blob/main/Assets/Logos/ProLUG_Round_Transparent_LOGO.png?raw=true" width="64" height="64"></img>
    <p>
        <h1>Unit 10: Bonus Material</h1>
    </p>
</div>

# ğŸ¯ **Bonus: Advanced Kubernetes Troubleshooting & Security** ğŸš€

This section provides **advanced troubleshooting techniques**, **security best practices**, and **real-world challenges** to strengthen your Kubernetes knowledge.

---

## ğŸ” **Step 1: Troubleshooting Kubernetes Cluster Issues**

When things go wrong, **systematic troubleshooting** is key. Hereâ€™s how you diagnose **common Kubernetes issues**.

### âœ… **Node Not Ready**

ğŸ” **Check node status**

```sh
kubectl get nodes
kubectl describe node <node-name>
```

ğŸ” **Investigate Kubelet logs**

```sh
journalctl -u k3s -n 50 --no-pager
```

ğŸ” **Verify system resources**

```sh
free -m     # Check available memory
df -h       # Check disk space
htop        # Monitor CPU usage
```

ğŸ’¡ **Possible Fixes**

- Restart K3s on the failing node:
    
    ```sh
    systemctl restart k3s
    ```
    
- Ensure network connectivity:
    
    ```sh
    ping <control-plane-ip>
    ```
    

---

### âœ… **Pods Stuck in "Pending" or "CrashLoopBackOff"**

ğŸ” **Check pod status**

```sh
kubectl get pods -A
kubectl describe pod <pod-name>
kubectl logs <pod-name>
```

ğŸ’¡ **Possible Fixes**

- If **insufficient resources**, scale up the cluster.
- If **missing images**, check container registry authentication.
- If **misconfigured storage**, inspect volumes:
    
    ```sh
    kubectl get pvc
    ```
    

---

## ğŸ”’ **Step 2: Securing Kubernetes Deployments**

Security is crucial in enterprise environments. Here are **quick wins** for a more **secure Kubernetes cluster**.

### âœ… **Limit Pod Privileges**

**Disable privileged containers**

```yaml
securityContext:
  privileged: false
```

**Enforce read-only file system**

```yaml
securityContext:
  readOnlyRootFilesystem: true
```

### âœ… **Restrict Network Access**

**Use Network Policies to restrict pod communication**

```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: deny-all
spec:
  podSelector: {}
  policyTypes:
    - Ingress
```

### âœ… **Use Pod Security Admission (PSA)**

Enable PSA to enforce security levels:

```sh
kubectl label --overwrite ns my-namespace pod-security.kubernetes.io/enforce=restricted
```

---

## âš¡ **Step 3: Performance Optimization Tips**

ğŸš€ **Enhance Kubernetes efficiency with these quick optimizations**:

### âœ… **Optimize Resource Requests & Limits**

Set appropriate **CPU & Memory limits** in deployments:

```yaml
resources:
  requests:
    cpu: "250m"
    memory: "256Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"
```

ğŸ“Œ **Why?** Prevents a single pod from consuming excessive resources.

---

### âœ… **Enable Horizontal Pod Autoscaling (HPA)**

Auto-scale pods **based on CPU or memory usage**:

```sh
kubectl autoscale deployment my-app --cpu-percent=50 --min=2 --max=10
```

---

## ğŸ”¥ **Step 4: Bonus Challenge â€“ Build a Secure, Scalable App**

ğŸ’¡ **Challenge:**

- **Create a secure containerized app**
- **Deploy it in Kubernetes**
- **Implement Network Policies**
- **Apply Pod Security Standards**

ğŸ“Œ **Helpful Resources**:

- [Pod Security Standards](https://kubernetes.io/docs/concepts/security/pod-security-standards/)
- [Kubernetes Hardening Guide](https://www.cisa.gov/kubernetes-hardening-guide)
- [Kubernetes Security Best Practices](https://kubernetes.io/docs/concepts/security/)

---

## ğŸ¯ **Conclusion**

This **bonus section** strengthens **your Kubernetes troubleshooting, security, and performance tuning skills**. Apply these principles in real-world deployments! ğŸš€

---
